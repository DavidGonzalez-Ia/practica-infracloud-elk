# Arquitectura del Sistema TaskManager con ELK Stack

**Autores:** Manuel Botella, Carlos Gomez, Diego Rodriguez, Hugo Langenaeken, David Gonzalez  
**Fecha:** Diciembre 2025  
**Proyecto:** PrÃ¡ctica Final InfraCloud

## ğŸ“ Diagrama de Arquitectura General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLUSTER KUBERNETES (Minikube)                    â”‚
â”‚                              Namespace: cloudedu                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     CAPA DE APLICACIÃ“N                            â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚   TaskManager App       â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   (Flask Python)        â”‚â—„â”€â”€â”€â”€ Service (NodePort 30080)      â”‚  â”‚
â”‚  â”‚  â”‚   - API REST            â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - GestiÃ³n de Tareas   â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - JSON Logging        â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   Deployment (1 replica)â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â”‚             â”‚                                                     â”‚  â”‚
â”‚  â”‚             â”‚ Logs JSON                                          â”‚  â”‚
â”‚  â”‚             â–¼                                                     â”‚  â”‚
â”‚  â”‚     /var/log/containers/*.log                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  CAPA DE PERSISTENCIA                             â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚       MySQL 8.0         â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - Base de datos       â”‚â—„â”€â”€â”€â”€ Service (ClusterIP 3306)      â”‚  â”‚
â”‚  â”‚  â”‚   - AlmacÃ©n de tareas   â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   Deployment (1 replica)â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â”‚             â”‚                                                     â”‚  â”‚
â”‚  â”‚             â–¼                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚    PersistentVolume     â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚    mysql-pv (1Gi)       â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚    /data/mysql-pv       â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  CAPA DE LOGGING (ELK STACK)                      â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚     Filebeat 8.11.0     â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - Recolector de logs  â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - DaemonSet (1 nodo)  â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - Lee contenedores    â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â”‚             â”‚                                                     â”‚  â”‚
â”‚  â”‚             â”‚ EnvÃ­a logs                                         â”‚  â”‚
â”‚  â”‚             â–¼                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚  Elasticsearch 8.11.0   â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - Motor de bÃºsqueda   â”‚â—„â”€â”€â”€â”€ Service (ClusterIP 9200)      â”‚  â”‚
â”‚  â”‚  â”‚   - IndexaciÃ³n de logs  â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - 1,856+ documentos   â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   Deployment (1 replica)â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â”‚             â”‚                                                     â”‚  â”‚
â”‚  â”‚             â–¼                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚    PersistentVolume     â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ elasticsearch-pvc (5Gi) â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚             â”‚                                                     â”‚  â”‚
â”‚  â”‚             â”‚ Consultas                                          â”‚  â”‚
â”‚  â”‚             â–¼                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚     Kibana 8.11.0       â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - Interfaz Web        â”‚â—„â”€â”€â”€â”€ Service (NodePort 30601)      â”‚  â”‚
â”‚  â”‚  â”‚   - Visualizaciones     â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   - Dashboards          â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚   Deployment (1 replica)â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USUARIO EXTERNO                                  â”‚
â”‚                                                                           â”‚
â”‚  Browser â”€â”€â–º http://localhost:30080  (TaskManager UI)                   â”‚
â”‚  Browser â”€â”€â–º http://localhost:5601   (Kibana Dashboard)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Flujo de Datos de Logs

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TaskManager    â”‚
â”‚  Flask App      â”‚
â”‚  (JSON Logger)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Escribe logs JSON
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /var/log/containers/        â”‚
â”‚  taskmanager-*.log           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Lee logs
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Filebeat       â”‚
â”‚  DaemonSet      â”‚
â”‚  (Shipper)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ EnvÃ­a logs
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Elasticsearch   â”‚
â”‚ (IndexaciÃ³n)    â”‚
â”‚ Ãndices:        â”‚
â”‚ - filebeat-*    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Consultas KQL
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Kibana       â”‚
â”‚ (VisualizaciÃ³n) â”‚
â”‚ - Discover      â”‚
â”‚ - Dashboards    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ Diagrama de Red y Dependencias

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NAMESPACE: cloudedu                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  TaskManager                  MySQL                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Pod          â”‚            â”‚ Pod          â”‚                â”‚
â”‚  â”‚ Port: 5000   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Port: 3306   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚         â”‚                                                      â”‚
â”‚         â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              Service: taskmanager-app-service      â”‚       â”‚
â”‚  â”‚              Type: NodePort                        â”‚       â”‚
â”‚  â”‚              Port: 5000 â†’ NodePort: 30080         â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                â”‚
â”‚  Elasticsearch              Kibana                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Pod          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Pod          â”‚                  â”‚
â”‚  â”‚ Port: 9200   â”‚          â”‚ Port: 5601   â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                          â”‚                          â”‚
â”‚         â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”          â”‚ Service: kibana         â”‚        â”‚
â”‚  â”‚ Service: es â”‚          â”‚ Type: NodePort          â”‚        â”‚
â”‚  â”‚ Type: ClIP  â”‚          â”‚ Port: 5601 â†’ NP: 30601 â”‚        â”‚
â”‚  â”‚ Port: 9200  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚         â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Filebeat    â”‚                                            â”‚
â”‚  â”‚  DaemonSet   â”‚                                            â”‚
â”‚  â”‚  (En cada    â”‚                                            â”‚
â”‚  â”‚   nodo)      â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RBAC (Security):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ClusterRole: filebeat                                 â”‚
â”‚  - Permisos para leer pods, namespaces, nodes        â”‚
â”‚                                                        â”‚
â”‚ ClusterRoleBinding: filebeat                          â”‚
â”‚  - Vincula ClusterRole con ServiceAccount             â”‚
â”‚                                                        â”‚
â”‚ ServiceAccount: filebeat (namespace cloudedu)         â”‚
â”‚  - Identidad para el DaemonSet de Filebeat           â”‚
â”‚                                                        â”‚
â”‚ ServiceAccount: taskmanager-sa                        â”‚
â”‚ Role: taskmanager-role                                â”‚
â”‚ RoleBinding: taskmanager-rolebinding                  â”‚
â”‚  - RBAC para la aplicaciÃ³n TaskManager                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Componentes de Seguridad

### ServiceAccounts
- **filebeat**: Identidad para el DaemonSet de Filebeat
- **taskmanager-sa**: Identidad para la aplicaciÃ³n TaskManager

### RBAC
```
ClusterRole: filebeat
â”œâ”€â”€ get, watch, list â†’ pods
â”œâ”€â”€ get, watch, list â†’ namespaces
â””â”€â”€ get, watch, list â†’ nodes

ClusterRoleBinding: filebeat
â””â”€â”€ Vincula ServiceAccount:filebeat con ClusterRole:filebeat

Role: taskmanager-role (namespace: cloudedu)
â”œâ”€â”€ get, list â†’ pods
â””â”€â”€ get â†’ services

RoleBinding: taskmanager-rolebinding
â””â”€â”€ Vincula ServiceAccount:taskmanager-sa con Role:taskmanager-role
```

## ğŸ’¾ Almacenamiento

### PersistentVolumes
```
mysql-pv
â”œâ”€â”€ Capacidad: 1Gi
â”œâ”€â”€ Modo: ReadWriteOnce
â”œâ”€â”€ Tipo: hostPath
â””â”€â”€ Path: /data/mysql-pv

elasticsearch-pvc
â”œâ”€â”€ Capacidad: 5Gi
â”œâ”€â”€ Modo: ReadWriteOnce
â””â”€â”€ StorageClass: standard
```

## ğŸ“Š Puertos y Servicios

| Servicio | Tipo | Puerto Interno | Puerto Externo | Protocolo |
|----------|------|----------------|----------------|-----------|
| taskmanager-app-service | NodePort | 5000 | 30080 | TCP |
| mysql | ClusterIP | 3306 | - | TCP |
| elasticsearch | ClusterIP | 9200, 9300 | - | TCP |
| kibana | NodePort | 5601 | 30601 | TCP |

## ğŸ”„ Estrategias de Despliegue

### Deployments
- **Rolling Update**: ActualizaciÃ³n sin downtime
- **MaxSurge**: 1 pod adicional durante actualizaciÃ³n
- **MaxUnavailable**: 0 pods no disponibles durante actualizaciÃ³n

### Health Checks

**Kibana:**
```yaml
readinessProbe:
  httpGet:
    path: /api/status
    port: 5601
  initialDelaySeconds: 60
  periodSeconds: 10

livenessProbe:
  httpGet:
    path: /api/status
    port: 5601
  initialDelaySeconds: 120
  periodSeconds: 20
```

**TaskManager:**
```yaml
livenessProbe:
  httpGet:
    path: /health
    port: 5000
  initialDelaySeconds: 30
  periodSeconds: 10
```

## ğŸ“ˆ MÃ©tricas de Rendimiento

- **Logs Indexados**: 1,856+ documentos
- **Ãndices Creados**: filebeat-taskmanager-*, filebeat-general-*
- **Tiempo de Respuesta**: < 100ms (consultas Elasticsearch)
- **Latencia de Logs**: < 5 segundos (desde generaciÃ³n hasta indexaciÃ³n)

## ğŸ¯ Puntos CrÃ­ticos de la Arquitectura

1. **Single Point of Failure**: MySQL y Elasticsearch con 1 rÃ©plica
2. **Almacenamiento**: hostPath no es adecuado para producciÃ³n
3. **Escalabilidad**: DaemonSet escala automÃ¡ticamente con nodos
4. **Alta Disponibilidad**: No configurada (solo 1 rÃ©plica por servicio)

## ğŸš€ Mejoras Futuras Recomendadas

1. **MÃºltiples RÃ©plicas**: 3+ rÃ©plicas para Elasticsearch
2. **StorageClass Distribuido**: Usar Ceph o GlusterFS
3. **Ingress Controller**: NGINX o Traefik para routing externo
4. **Prometheus + Grafana**: Monitoreo de mÃ©tricas
5. **Backup AutomÃ¡tico**: Snapshots de Elasticsearch
6. **Autoscaling**: HPA para TaskManager

---

**Proyecto:** PrÃ¡ctica Final InfraCloud  
**Equipo:** Manuel Botella, Carlos Gomez, Diego Rodriguez, Hugo Langenaeken, David Gonzalez  
**Fecha:** Diciembre 2025

